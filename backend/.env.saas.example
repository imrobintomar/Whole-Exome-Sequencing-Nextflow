# ============================================================================
# WES Platform - SaaS Extension Environment Variables
# ============================================================================
# This file contains ALL environment variables required for SaaS features.
# Copy this to .env and fill in your actual values.
#
# SECURITY NOTE: NEVER commit .env to version control!
# ============================================================================

# ========================================
# EXISTING VARIABLES (from original .env)
# ========================================

# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
SECRET_KEY=YOUR_SECRET_KEY_HERE

# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,https://your-frontend.vercel.app

# Directories
UPLOAD_DIR=./uploads
RESULTS_DIR=./results

# Nextflow
NEXTFLOW_SCRIPT=../main.nf
REFERENCE_GENOME=/path/to/hg38.fa
KNOWN_SITES_1=/path/to/known_indels.vcf.gz
KNOWN_SITES_2=/path/to/gold_standard.indels.vcf.gz

# Database
DATABASE_URL=sqlite:///./wes_pipeline.db

# Firebase (if using Firebase Auth)
# GOOGLE_APPLICATION_CREDENTIALS=./firebase-service-account.json


# ========================================
# SAAS EXTENSION - REQUIRED VARIABLES
# ========================================

# Frontend URL (for Stripe redirects)
FRONTEND_URL=http://localhost:3000

# Stripe API Keys
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxx

# Stripe Webhook Secret
# Get from: https://dashboard.stripe.com/webhooks
# Create webhook endpoint: https://your-backend.com/billing/webhooks/stripe
# Select events: checkout.session.completed, customer.subscription.updated,
#                customer.subscription.deleted, invoice.payment_failed
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxx


# ========================================
# ADMIN USERS
# ========================================
# Comma-separated list of Firebase UIDs for admin users
# These users will have access to the admin dashboard
# Get Firebase UID from Firebase Console > Authentication
ADMIN_USER_UIDS=firebase_uid_1,firebase_uid_2


# ========================================
# OPTIONAL: EMAIL NOTIFICATIONS (Future)
# ========================================
# Uncomment and configure if you want email notifications
# SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxx
# ADMIN_EMAIL=admin@yourplatform.com
# NOTIFICATION_EMAIL_FROM=noreply@yourplatform.com


# ========================================
# OPTIONAL: Advanced Configuration
# ========================================

# Database (can switch to PostgreSQL for production)
# DATABASE_URL=postgresql://user:password@localhost/wes_platform

# Default Free Tier Limits
# DEFAULT_FREE_JOBS_LIMIT=2

# Session timeout (hours)
# SESSION_TIMEOUT_HOURS=24


# ============================================================================
# STRIPE PRICE IDS (Configure after creating products in Stripe)
# ============================================================================
#
# After setting up Stripe:
# 1. Create products in Stripe Dashboard (Products > Add Product)
# 2. Create recurring prices for each product
# 3. Copy the Price IDs and update the database:
#
# UPDATE subscription_plans SET stripe_price_id = 'price_xxxxx' WHERE name = 'Basic';
# UPDATE subscription_plans SET stripe_price_id = 'price_yyyyy' WHERE name = 'Pro';
#
# Example Price IDs:
# Basic Plan: price_1234567890abcdefghij
# Pro Plan: price_0987654321zyxwvutsrq
#
# ============================================================================


# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
#
# 1. Copy this file to .env:
#    cp .env.saas.example .env
#
# 2. Fill in all required values above
#
# 3. Initialize SaaS database tables:
#    python init_saas_db.py
#
# 4. Update Stripe Price IDs in database (see instructions above)
#
# 5. Add admin users to admin_users table:
#    INSERT INTO admin_users (firebase_uid, email) VALUES ('your_uid', 'admin@email.com');
#
# 6. Restart backend server:
#    uvicorn main:app --reload
#
# 7. Test the following:
#    - Access admin dashboard at /admin/dashboard/stats
#    - View subscription plans at /billing/plans
#    - Create test subscription with Stripe test cards
#    - Verify usage limits are enforced
#
# ============================================================================


# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
#
# ✓ .env is in .gitignore
# ✓ All secrets are from environment variables (no hardcoded values)
# ✓ Stripe webhook signature is verified
# ✓ Admin endpoints require authentication
# ✓ CORS is properly configured
# ✓ Database backups are configured (production)
# ✓ HTTPS is enabled (production)
# ✓ Rate limiting is configured (production)
#
# ============================================================================
